<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serie Temporal con D3.js</title>
    <style>
        circle {
            fill: steelblue;
            transition: r 0.3s, stroke-width 0.3s;
        }

        .highlight {
            r: 10;
            stroke: blue;
            stroke-width: 3;
        }
    </style>
</head>
<body>
    <svg id="chart" width="800" height="400"></svg>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
        const data = [
            { date: new Date(2023, 0, 1), value: 30 },
            { date: new Date(2023, 0, 2), value: 20 },
            { date: new Date(2023, 0, 3), value: 50 },
            { date: new Date(2023, 0, 4), value: 40 },
            { date: new Date(2023, 0, 5), value: 60 },
            { date: new Date(2023, 0, 6), value: 80 },
            { date: new Date(2023, 0, 7), value: 70 }
        ];

        // Generar una fecha aleatoria entre las fechas de los datos
        const randomIndex = Math.floor(Math.random() * data.length);
        const highlightDate = data[randomIndex].date;

        const svg = d3.select("#chart")
            .append("g")
            .attr("transform", "translate(50, 50)");

        const xScale = d3.scaleTime()
            .domain(d3.extent(data, d => d.date))
            .range([0, 700]);

        const yScale = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.value)])
            .range([300, 0]);

        // Ejes
        svg.append("g")
            .attr("transform", "translate(0, 300)")
            .call(d3.axisBottom(xScale));

        svg.append("g")
            .call(d3.axisLeft(yScale));

        // Crear círculos
        svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", d => xScale(d.date))
            .attr("cy", d => yScale(d.value))
            .attr("r", d => d.date === highlightDate ? 10 : 5) // tamaño de círculo
            .attr("class", d => d.date === highlightDate ? 'highlight' : '')
            .on("mouseover", function() {
                d3.select(this).attr("class", "highlight");
            })
            .on("mouseout", function() {
                d3.select(this).attr("class", d => d.date === highlightDate ? 'highlight' : '');
            });
    </script>
</body>
</html>
